"use strict";(self.webpackChunkmysilant=self.webpackChunkmysilant||[]).push([[929],{797:function(e,t,n){n.d(t,{Z:function(){return c}});var i=n(885),a={description:"DirDescription_description__e9oYw"},r=n(791),s=n(184);function c(e){var t=e.dirID,n=e.directory,c=(0,r.useState)({}),l=(0,i.Z)(c,2),o=l[0],u=l[1];return(0,r.useEffect)((function(){n&&t&&u(n.find((function(e){return e.id===+t})))}),[n,t]),(0,s.jsx)(s.Fragment,{children:o.description&&(0,s.jsx)("span",{className:a.description,children:o.description})})}},929:function(e,t,n){n.r(t),n.d(t,{default:function(){return x}});var i=n(885),a={detail:"MachineDetail_detail__ng0uK",tabs:"MachineDetail_tabs__qT32P",general_info:"MachineDetail_general_info__OEA+t",machine:"MachineDetail_machine__Ioo0M",serial:"MachineDetail_serial__wOI3e",close_button:"MachineDetail_close_button__apADb"},r=n(791),s=n(683),c={machine_detail:"MachineDetailGeneral_machine_detail__G5XXd",textarea:"MachineDetailGeneral_textarea__E8Mru",submit:"MachineDetailGeneral_submit__5euyz",status_ok:"MachineDetailGeneral_status_ok__BrRDp",status_error:"MachineDetailGeneral_status_error__yHEYq"},l=n(797),o=n(184);function u(e){var t=e.directory,n=e.userGroup,a=e.users,u=e.machineProp,d=(0,r.useState)(!0),h=(0,i.Z)(d,2),m=h[0],p=h[1],_=(0,r.useState)({}),f=(0,i.Z)(_,2),x=f[0],j=f[1],v=(0,r.useState)(),b=(0,i.Z)(v,2),g=b[0],y=b[1],S=(0,r.useState)(),C=(0,i.Z)(S,2),D=C[0],Z=C[1],T=(0,r.useState)(""),k=(0,i.Z)(T,2),N=k[0],O=k[1],w=(0,r.useState)(),P=(0,i.Z)(w,2),E=P[0],M=P[1],F=(0,r.useState)(""),I=(0,i.Z)(F,2),L=I[0],G=I[1],X=(0,r.useState)(),R=(0,i.Z)(X,2),U=R[0],J=R[1],V=(0,r.useState)(""),Y=(0,i.Z)(V,2),A=Y[0],K=Y[1],B=(0,r.useState)(),H=(0,i.Z)(B,2),q=H[0],z=H[1],W=(0,r.useState)(""),Q=(0,i.Z)(W,2),$=Q[0],ee=Q[1],te=(0,r.useState)(),ne=(0,i.Z)(te,2),ie=ne[0],ae=ne[1],re=(0,r.useState)(""),se=(0,i.Z)(re,2),ce=se[0],le=se[1],oe=(0,r.useState)(""),ue=(0,i.Z)(oe,2),de=ue[0],he=ue[1],me=(0,r.useState)(""),pe=(0,i.Z)(me,2),_e=pe[0],fe=pe[1],xe=(0,r.useState)(""),je=(0,i.Z)(xe,2),ve=je[0],be=je[1],ge=(0,r.useState)(""),ye=(0,i.Z)(ge,2),Se=ye[0],Ce=ye[1],De=(0,r.useState)(""),Ze=(0,i.Z)(De,2),Te=Ze[0],ke=Ze[1],Ne=(0,r.useState)(),Oe=(0,i.Z)(Ne,2),we=Oe[0],Pe=Oe[1],Ee=(0,r.useState)(),Me=(0,i.Z)(Ee,2),Fe=Me[0],Ie=Me[1],Le=(0,r.useState)({}),Ge=(0,i.Z)(Le,2),Xe=Ge[0],Re=Ge[1],Ue=(0,r.useState)(!1),Je=(0,i.Z)(Ue,2),Ve=Je[0],Ye=Je[1],Ae=function(e){var t="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===t.length)return t.pop().split(";").shift()}("csrftoken");(0,r.useEffect)((function(){"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"===n&&p(!1),u.hasOwnProperty("machine_model")&&j((0,s.Z)({},u))}),[u,n]),(0,r.useEffect)((function(){x.hasOwnProperty("machine_model")&&(y(x.id),Z(x.machine_model),O(x.machine_number),M(x.engine_model),G(x.engine_number),J(x.transmission_model),K(x.transmission_number),z(x.drive_axle_model),ee(x.drive_axle_number),ae(x.steer_axle_model),le(x.steer_axle_number),he(x.supply_contract),fe(x.shipping_date),be(x.consignee),ke(x.delivery_address),Ce(x.additional),Pe(x.customer),Ie(x.service_center))}),[x]);return(0,o.jsx)("div",{className:c.machine_detail,children:(0,o.jsxs)("form",{autoComplete:"off",onSubmit:function(e){e.preventDefault(),Ye(!0),fetch("http://localhost:8000/api/machines/".concat(g),{method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":Ae},body:JSON.stringify({machine_number:N,engine_number:L,transmission_number:A,drive_axle_number:$,steer_axle_number:ce,supply_contract:de,shipping_date:_e,consignee:ve,delivery_address:Te,additional:Se,machine_model:D,engine_model:E,transmission_model:U,drive_axle_model:q,steer_axle_model:ie,customer:we,service_center:Fe}),credentials:"include"}).then((function(e){if(e.ok)return e.json();throw Error("".concat(e.status," ").concat(e.statusText))})).then((function(e){j(e),Re({className:c.status_ok,statusText:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b"})})).catch((function(e){Re({className:c.status_error,statusText:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b, \u043e\u0448\u0438\u0431\u043a\u0430 \n ".concat(e)}),console.log(e)})).finally((function(){Ye(!1)}))},children:[D?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("label",{children:["\u041c\u043e\u0434\u0435\u043b\u044c:",(0,o.jsx)("select",{disabled:m,value:D,onChange:function(e){return Z(e.target.value)},name:"",id:"",children:t.map((function(e){return"\u041c\u043e\u0434\u0435\u043b\u044c \u0442\u0435\u0445\u043d\u0438\u043a\u0438"===e.name_?(0,o.jsx)("option",{value:e.id,children:e.title},e.id):null}))})]}),(0,o.jsx)(l.Z,{dirID:D,directory:t})]}):null,N?(0,o.jsxs)("label",{children:["\u0417\u0430\u0432\u043e\u0434\u0441\u043a\u043e\u0439 \u043d\u043e\u043c\u0435\u0440 \u043c\u0430\u0448\u0438\u043d\u044b:",(0,o.jsx)("input",{type:"text",disabled:m,name:"machine_number",id:"",value:N,onChange:function(e){return O(e.target.value)}})]}):null,E?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("label",{children:["\u041c\u043e\u0434\u0435\u043b\u044c \u0434\u0432\u0438\u0433\u0430\u0442\u0435\u043b\u044f:",(0,o.jsx)("select",{disabled:m,value:E,onChange:function(e){return M(e.target.value)},name:"",id:"",children:t.map((function(e){return"\u041c\u043e\u0434\u0435\u043b\u044c \u0434\u0432\u0438\u0433\u0430\u0442\u0435\u043b\u044f"===e.name_?(0,o.jsx)("option",{value:e.id,children:e.title},e.id):null}))})]}),(0,o.jsx)(l.Z,{dirID:E,directory:t})]}):null,L?(0,o.jsxs)("label",{children:["\u0417\u0430\u0432\u043e\u0434\u0441\u043a\u043e\u0439 \u043d\u043e\u043c\u0435\u0440 \u0434\u0432\u0438\u0433\u0430\u0442\u0435\u043b\u044f:",(0,o.jsx)("input",{type:"text",disabled:m,name:"engine_number",id:"",value:L,onChange:function(e){return G(e.target.value)}})]}):null,U?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("label",{children:["\u041c\u043e\u0434\u0435\u043b\u044c \u0442\u0440\u0430\u043d\u0441\u043c\u0438\u0441\u0441\u0438\u0438:",(0,o.jsx)("select",{disabled:m,value:U,onChange:function(e){return J(e.target.value)},name:"",id:"",children:t.map((function(e){return"\u041c\u043e\u0434\u0435\u043b\u044c \u0442\u0440\u0430\u043d\u0441\u043c\u0438\u0441\u0441\u0438\u0438"===e.name_?(0,o.jsx)("option",{value:e.id,children:e.title},e.id):null}))})]}),(0,o.jsx)(l.Z,{dirID:U,directory:t})]}):null,A?(0,o.jsxs)("label",{children:["\u0417\u0430\u0432\u043e\u0434\u0441\u043a\u043e\u0439 \u043d\u043e\u043c\u0435\u0440 \u0442\u0440\u0430\u043d\u0441\u043c\u0438\u0441\u0441\u0438\u0438:",(0,o.jsx)("input",{type:"text",disabled:m,name:"transmission_number",id:"",value:A,onChange:function(e){return K(e.target.value)}})]}):null,q?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("label",{children:["\u041c\u043e\u0434\u0435\u043b\u044c \u0432\u0435\u0434\u0443\u0449\u0435\u0433\u043e \u043c\u043e\u0441\u0442\u0430:",(0,o.jsx)("select",{disabled:m,value:q,onChange:function(e){return z(e.target.value)},name:"",id:"",children:t.map((function(e){return"\u041c\u043e\u0434\u0435\u043b\u044c \u0432\u0435\u0434\u0443\u0449\u0435\u0433\u043e \u043c\u043e\u0441\u0442\u0430"===e.name_?(0,o.jsx)("option",{value:e.id,children:e.title},e.id):null}))})]}),(0,o.jsx)(l.Z,{dirID:q,directory:t})]}):null,$?(0,o.jsxs)("label",{children:["\u0417\u0430\u0432\u043e\u0434\u0441\u043a\u043e\u0439 \u043d\u043e\u043c\u0435\u0440 \u0432\u0435\u0434\u0443\u0449\u0435\u0433\u043e \u043c\u043e\u0441\u0442\u0430:",(0,o.jsx)("input",{type:"text",disabled:m,name:"drive_axle_number",id:"",value:$,onChange:function(e){return ee(e.target.value)}})]}):null,ie?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("label",{children:["\u041c\u043e\u0434\u0435\u043b\u044c \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c\u043e\u0433\u043e \u043c\u043e\u0441\u0442\u0430:",(0,o.jsx)("select",{disabled:m,value:ie,onChange:function(e){return ae(e.target.value)},name:"",id:"",children:t.map((function(e){return"\u041c\u043e\u0434\u0435\u043b\u044c \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c\u043e\u0433\u043e \u043c\u043e\u0441\u0442\u0430"===e.name_?(0,o.jsx)("option",{value:e.id,children:e.title},e.id):null}))})]}),(0,o.jsx)(l.Z,{dirID:ie,directory:t})]}):null,ce?(0,o.jsxs)("label",{children:["\u0417\u0430\u0432\u043e\u0434\u0441\u043a\u043e\u0439 \u043d\u043e\u043c\u0435\u0440 \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c\u043e\u0433\u043e \u043c\u043e\u0441\u0442\u0430:",(0,o.jsx)("input",{type:"text",disabled:m,name:"steer_axle_number",id:"",value:ce,onChange:function(e){return le(e.target.value)}})]}):null,de?(0,o.jsxs)("label",{children:["\u0414\u043e\u0433\u043e\u0432\u043e\u0440 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438 \u2116, \u0434\u0430\u0442\u0430:",(0,o.jsx)("input",{type:"text",disabled:m,name:"supply_contract",id:"",value:de,onChange:function(e){return he(e.target.value)}})]}):null,_e?(0,o.jsxs)("label",{children:["\u0414\u0430\u0442\u0430 \u043e\u0442\u0433\u0440\u0443\u0437\u043a\u0438 \u0441 \u0437\u0430\u0432\u043e\u0434\u0430:",(0,o.jsx)("input",{type:"date",disabled:m,name:"shipping_date",id:"",value:_e,onChange:function(e){return fe(e.target.value)}})]}):null,ve?(0,o.jsxs)("label",{children:["\u0413\u0440\u0443\u0437\u043e\u043f\u043e\u043b\u0443\u0447\u0430\u0442\u0435\u043b\u044c (\u043a\u043e\u043d\u0435\u0447\u043d\u044b\u0439 \u043f\u043e\u0442\u0440\u0435\u0431\u0438\u0442\u0435\u043b\u044c):",(0,o.jsx)("input",{type:"text",disabled:m,name:"consignee",id:"",value:ve,onChange:function(e){return be(e.target.value)}})]}):null,Te?(0,o.jsxs)("label",{children:["\u0410\u0434\u0440\u0435\u0441 \u043f\u043e\u0441\u0442\u0430\u0432\u043a\u0438 (\u044d\u043a\u0441\u043f\u043b\u0443\u0430\u0442\u0430\u0446\u0438\u0438):",(0,o.jsx)("input",{type:"text",disabled:m,name:"delivery_address",id:"",value:Te,onChange:function(e){return ke(e.target.value)}})]}):null,Se?(0,o.jsxs)("label",{children:["\u041a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0438\u044f (\u0434\u043e\u043f. \u043e\u043f\u0446\u0438\u0438):",(0,o.jsx)("textarea",{disabled:m,name:"",className:c.textarea,value:Se,onChange:function(e){return Ce(e.target.value)}})]}):null,we?(0,o.jsxs)("label",{children:["\u041a\u043b\u0438\u0435\u043d\u0442:","\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"===n&&Object.entries(a).length>0?(0,o.jsx)("select",{disabled:m,value:we,onChange:function(e){return Pe(e.target.value)},name:"",id:"",children:a.map((function(e){return e.groups.includes(1)?(0,o.jsx)("option",{value:e.id,children:e.first_name},e.id):null}))}):(0,o.jsx)("input",{type:"text",disabled:m,defaultValue:"".concat(a.find((function(e){return e.id===we})).first_name)})]}):null,Fe?(0,o.jsxs)("label",{children:["\u0421\u0435\u0440\u0432\u0438\u0441\u043d\u0430\u044f \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044f:","\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"===n&&Object.entries(a).length>0?(0,o.jsx)("select",{disabled:m,value:Fe,onChange:function(e){return Ie(e.target.value)},name:"",id:"",children:a.map((function(e){return e.groups.includes(2)&&"\u0441\u0430\u043c\u043e\u0441\u0442\u043e\u044f\u0442\u0435\u043b\u044c\u043d\u043e"!==e.first_name?(0,o.jsx)("option",{value:e.id,children:e.first_name},e.id):null}))}):(0,o.jsx)("input",{type:"text",disabled:m,defaultValue:"".concat(a.find((function(e){return e.id===Fe})).first_name)})]}):null,"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"===n?(0,o.jsxs)("div",{className:c.submit,children:[(0,o.jsx)("button",{type:"submit",name:"submit",children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),Ve?(0,o.jsx)("div",{className:c.status_ok,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):null,Xe?(0,o.jsx)("div",{className:Xe.className,children:Xe.statusText}):null]}):null]})})}var d={machine_to:"MachineTO_machine_to__GTRYl",table_container:"MachineTO_table_container__3-f0X",table_to:"MachineTO_table_to__kRZc9",error_message:"MachineTO_error_message__7VoiP",add_btn:"MachineTO_add_btn__bGBYp"},h=n(88);function m(e){var t=e.directory,n=e.users,a=e.machineProp,s=e.machines,c=(0,r.useState)({}),l=(0,i.Z)(c,2),u=l[0],m=l[1],p=(0,r.useState)(""),_=(0,i.Z)(p,2),f=_[0],x=_[1],j=(0,r.useState)(!1),v=(0,i.Z)(j,2),b=v[0],g=v[1],y=(0,r.useState)("to_list"),S=(0,i.Z)(y,2),C=S[0],D=S[1],Z=(0,r.useState)({}),T=(0,i.Z)(Z,2),k=T[0],N=T[1],O=(0,r.useState)(0),w=(0,i.Z)(O,2),P=w[0],E=w[1];(0,r.useEffect)((function(){g(!0),fetch("http://localhost:8000/api/to/?machine=".concat(a.machine_number),{headers:{"Content-Type":"application/json;charset=utf-8"},credentials:"include"}).then((function(e){if(e.ok)return e.json();throw Error("".concat(e.status," ").concat(e.statusText))})).then((function(e){m(e),x(""),g(!1)})).catch((function(e){x("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. ".concat(e)),console.log(e),g(!1)}))}),[a,P]);var M=function(e,t){e.preventDefault(),N(t),D("to_detail")};return(0,o.jsxs)("div",{className:d.machine_to,children:["to_create"===C?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(h.Z,{directory:t,toProp:{date:(new Date).toISOString().split("T")[0],duration:0,id:0,machine:k.id,machine_number:"",order:"",order_date:(new Date).toISOString().split("T")[0],service_center:0,service_type:0},users:n,machines:s,setToPage:D,toPage:C,updateList:P,setUpdateList:E})}):null,"to_detail"===C?(0,o.jsx)(h.Z,{directory:t,toProp:k,users:n,machines:s,setToPage:D,toPage:C,setUpdateList:E,updateList:P}):null,"to_list"===C?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{type:"button",className:d.add_btn,onClick:function(e){!function(e,t){e.preventDefault(),N(t),D("to_create")}(e,a)},children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0422\u041e"}),(0,o.jsx)("div",{className:d.table_container,children:(0,o.jsxs)("table",{className:d.table_to,children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"\u0414\u0430\u0442\u0430 \u0437\u0430\u043a\u0430\u0437-\u043d\u0430\u0440\u044f\u0434\u0430"}),(0,o.jsx)("th",{children:"\u2116 \u0437\u0430\u043a\u0430\u0437-\u043d\u0430\u0440\u044f\u0434\u0430"}),(0,o.jsx)("th",{children:"\u0412\u0438\u0434 \u0422\u041e"}),(0,o.jsx)("th",{children:"\u0414\u0430\u0442\u0430 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u0422\u041e"}),(0,o.jsx)("th",{children:"\u041d\u0430\u0440\u0430\u0431\u043e\u0442\u043a\u0430, \u043c/\u0447\u0430\u0441"}),(0,o.jsx)("th",{children:"\u041e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f, \u043f\u0440\u043e\u0432\u043e\u0434\u0438\u0432\u0448\u0430\u044f \u0422\u041e"}),(0,o.jsx)("th",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u0422\u041e"})]})}),b?(0,o.jsx)("tbody",{children:(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:7,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})})}):(0,o.jsxs)("tbody",{children:[u.length>0&&Object.entries(n).length>0&&Object.entries(t).length>0?u.map((function(e){return(0,o.jsxs)("tr",{children:[(0,o.jsx)("td",{onClick:function(t){return M(t,e)},children:new Date(e.order_date).toLocaleDateString()}),(0,o.jsx)("td",{onClick:function(t){return M(t,e)},children:e.order}),(0,o.jsx)("td",{onClick:function(t){return M(t,e)},children:t.find((function(t){return t.id===e.service_type})).title}),(0,o.jsx)("td",{onClick:function(t){return M(t,e)},children:new Date(e.date).toLocaleDateString()}),(0,o.jsx)("td",{onClick:function(t){return M(t,e)},children:e.duration}),(0,o.jsx)("td",{onClick:function(t){return M(t,e)},children:n.find((function(t){return t.id===e.service_center})).first_name}),(0,o.jsx)("td",{onClick:function(t){return M(t,e)},children:t.find((function(t){return t.id===e.service_type})).title.description?null:t.find((function(t){return t.id===e.service_type})).description})]},e.id)})):(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:7,children:"\u0422\u041e \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"})}),f?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:7,className:d.error_message,children:f})}):null]})]})})]}):null]})}var p={machine_complaints:"MachineComplaints_machine_complaints__SnLwi",table_container:"MachineComplaints_table_container__TjJx9",table_complaints:"MachineComplaints_table_complaints__fK+do",active:"MachineComplaints_active__SoSuz",error_message:"MachineComplaints_error_message__-i03V",add_btn:"MachineComplaints_add_btn__19S21"},_=n(921);function f(e){var t=e.directory,n=e.users,a=e.machineProp,s=e.machines,c=e.userGroup,l=(0,r.useState)({}),u=(0,i.Z)(l,2),d=u[0],h=u[1],m=(0,r.useState)(""),f=(0,i.Z)(m,2),x=f[0],j=f[1],v=(0,r.useState)(!1),b=(0,i.Z)(v,2),g=b[0],y=b[1],S=(0,r.useState)("complaints_list"),C=(0,i.Z)(S,2),D=C[0],Z=C[1],T=(0,r.useState)({}),k=(0,i.Z)(T,2),N=k[0],O=k[1],w=(0,r.useState)(0),P=(0,i.Z)(w,2),E=P[0],M=P[1];(0,r.useEffect)((function(){y(!0),fetch("http://localhost:8000/api/complaints/?machine=".concat(a.machine_number),{headers:{"Content-Type":"application/json;charset=utf-8"},credentials:"include"}).then((function(e){if(e.ok)return e.json();throw Error("".concat(e.status," ").concat(e.statusText))})).then((function(e){h(e),j(""),y(!1)})).catch((function(e){j("\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430. ".concat(e)),console.log(e),y(!1)}))}),[a]);var F=function(e,t){e.preventDefault(),O(t),Z("complaints_detail")};return(0,o.jsxs)("div",{className:p.machine_complaints,children:["complaints_create"===D?(0,o.jsx)(_.Z,{directory:t,complaintDetailItem:{id:0,date:(new Date).toISOString().split("T")[0],description:"",downtime:0,duration:0,machine_number:"",spares:"",machine:N.id,recovery_method:0,recovery_date:(new Date).toISOString().split("T")[0],service_center:0,unit:0},users:n,machines:s,setComplaintsPage:Z,complaintsPage:D,setUpdateList:M}):null,"complaints_detail"===D?(0,o.jsx)(_.Z,{directory:t,complaintDetailItem:N,userGroup:c,users:n,machines:s,setComplaintsPage:Z,complaintsPage:D,setUpdateList:M,updateList:E}):null,"complaints_list"===D?(0,o.jsxs)(o.Fragment,{children:["\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"===c||"\u0421\u0435\u0440\u0432\u0438\u0441\u043d\u0430\u044f \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f"===c?(0,o.jsx)("button",{type:"button",className:p.add_btn,onClick:function(e){return function(e,t){e.preventDefault(),O(t),Z("complaints_create")}(e,a)},children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0440\u0435\u043a\u043b\u0430\u043c\u0430\u0446\u0438\u044e"}):null,(0,o.jsx)("div",{className:p.table_container,children:(0,o.jsxs)("table",{className:p.table_complaints,children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"\u0414\u0430\u0442\u0430 \u043e\u0442\u043a\u0430\u0437\u0430"}),(0,o.jsx)("th",{children:"\u0423\u0437\u0435\u043b \u043e\u0442\u043a\u0430\u0437\u0430"}),(0,o.jsx)("th",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043e\u0442\u043a\u0430\u0437\u0430"}),(0,o.jsx)("th",{children:"\u0421\u043f\u043e\u0441\u043e\u0431 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f"}),(0,o.jsx)("th",{children:"\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u0437\u0430\u043f\u0447\u0430\u0441\u0442\u0438"}),(0,o.jsx)("th",{children:"\u0414\u0430\u0442\u0430 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f"}),(0,o.jsx)("th",{children:"\u0412\u0440\u0435\u043c\u044f \u043f\u0440\u043e\u0441\u0442\u043e\u044f \u0442\u0435\u0445\u043d\u0438\u043a\u0438"}),(0,o.jsx)("th",{children:"\u041d\u0430\u0440\u0430\u0431\u043e\u0442\u043a\u0430, \u043c/\u0447\u0430\u0441"})]})}),g?(0,o.jsx)("tbody",{children:(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:7,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."})})}):(0,o.jsxs)("tbody",{children:[d.length>0&&Object.entries(n).length>0&&Object.entries(t).length>0?d.map((function(e){return(0,o.jsx)("tr",{children:"\u041c\u0435\u043d\u0435\u0434\u0436\u0435\u0440"===c||"\u0421\u0435\u0440\u0432\u0438\u0441\u043d\u0430\u044f \u043e\u0440\u0433\u0430\u043d\u0438\u0437\u0430\u0446\u0438\u044f"===c?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("td",{className:p.active,onClick:function(t){return F(t,e)},children:new Date(e.date).toLocaleDateString()}),(0,o.jsx)("td",{className:p.active,onClick:function(t){return F(t,e)},title:t.find((function(t){return t.id===e.unit})).description,children:t.find((function(t){return t.id===e.unit})).title}),(0,o.jsx)("td",{className:p.active,onClick:function(t){return F(t,e)},children:e.description}),(0,o.jsx)("td",{className:p.active,onClick:function(t){return F(t,e)},title:t.find((function(t){return t.id===e.recovery_method})).description,children:t.find((function(t){return t.id===e.recovery_method})).title}),(0,o.jsx)("td",{className:p.active,onClick:function(t){return F(t,e)},children:e.spares}),(0,o.jsx)("td",{className:p.active,onClick:function(t){return F(t,e)},children:new Date(e.recovery_date).toLocaleDateString()}),(0,o.jsx)("td",{className:p.active,onClick:function(t){return F(t,e)},children:e.downtime}),(0,o.jsx)("td",{className:p.active,onClick:function(t){return F(t,e)},children:e.duration})]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("td",{children:new Date(e.date).toLocaleDateString()}),(0,o.jsx)("td",{title:t.find((function(t){return t.id===e.unit})).description,children:t.find((function(t){return t.id===e.unit})).title}),(0,o.jsx)("td",{children:e.description}),(0,o.jsx)("td",{title:t.find((function(t){return t.id===e.recovery_method})).description,children:t.find((function(t){return t.id===e.recovery_method})).title}),(0,o.jsx)("td",{children:e.spares}),(0,o.jsx)("td",{children:new Date(e.recovery_date).toLocaleDateString()}),(0,o.jsx)("td",{children:e.downtime}),(0,o.jsx)("td",{children:e.duration})]})},e.id)})):(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:8,children:"\u0420\u0435\u043a\u043b\u0430\u043c\u0430\u0446\u0438\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"})}),x?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:7,className:p.error_message,children:x})}):null]})]})})]}):null]})}function x(e){var t=e.directory,n=e.userGroup,s=e.users,c=e.setMachinePage,l=e.machineProp,d=e.machines,h=(0,r.useState)("general"),p=(0,i.Z)(h,2),_=p[0],x=p[1];return(0,o.jsxs)("div",{className:a.detail,children:["general"===_?(0,o.jsx)("h3",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043a\u043e\u043c\u043f\u043b\u0435\u043a\u0442\u0430\u0446\u0438\u0438 \u0438 \u0442\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u0438\u0445 \u0445\u0430\u0440\u0430\u043a\u0442\u0435\u0440\u0438\u0441\u0442\u0438\u043a\u0430\u0445:"}):null,"tos"===_?(0,o.jsx)("h3",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u043d\u044b\u0445 \u0422\u041e:"}):null,"complaints"===_?(0,o.jsx)("h3",{children:"\u0418\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f \u043e \u0440\u0435\u043a\u043b\u0430\u043c\u0430\u0446\u0438\u044f\u0445:"}):null,(0,o.jsxs)("div",{className:a.general_info,children:[(0,o.jsxs)("div",{className:a.machine,children:["\u041c\u0430\u0448\u0438\u043d\u0430: ",t.find((function(e){return e.id===l.machine_model})).title]}),(0,o.jsxs)("div",{className:a.serial,children:["\u0417\u0430\u0432\u043e\u0434\u0441\u043a\u043e\u0439 \u043d\u043e\u043c\u0435\u0440: ",l.machine_number]}),(0,o.jsx)("button",{type:"button",className:a.close_button,title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:function(e){e.preventDefault(),c("machine_list")},children:"X"})]}),(0,o.jsxs)("div",{className:a.tabs,children:[(0,o.jsx)("button",{onClick:function(e){e.preventDefault(),x("general")},children:"\u041e\u0431\u0449\u0430\u044f \u0438\u043d\u0444\u043e\u0440\u043c\u0430\u0446\u0438\u044f"}),(0,o.jsx)("button",{onClick:function(e){e.preventDefault(),x("tos")},children:"\u0422\u0435\u0445\u043d\u0438\u0447\u0435\u0441\u043a\u043e\u0435 \u043e\u0431\u0441\u043b\u0443\u0436\u0438\u0432\u0430\u043d\u0438\u0435"}),(0,o.jsx)("button",{onClick:function(e){e.preventDefault(),x("complaints")},children:"\u0420\u0435\u043a\u043b\u0430\u043c\u0430\u0446\u0438\u0438"})]}),"tos"===_?(0,o.jsx)(o.Fragment,{children:(0,o.jsx)(m,{directory:t,users:s,machineProp:l,machines:d})}):null,"complaints"===_?(0,o.jsx)(f,{directory:t,users:s,machineProp:l,machines:d,userGroup:n}):null,"general"===_?(0,o.jsx)(u,{directory:t,userGroup:n,users:s,machineProp:l}):null]})}},921:function(e,t,n){n.d(t,{Z:function(){return u}});var i=n(683),a=n(885),r={complaints_detail:"ComplaintsDetail_complaints_detail__+vtJY",close_button:"ComplaintsDetail_close_button__S6DaZ",textarea:"ComplaintsDetail_textarea__8HSAr",submit:"ComplaintsDetail_submit__7yIjT",status_ok:"ComplaintsDetail_status_ok__NSVmC",status_error:"ComplaintsDetail_status_error__JNKg4"},s=n(791),c={description:"DirDescription_description__hSl97"},l=n(184);function o(e){var t=e.dirID,n=e.directory,i=(0,s.useState)({}),r=(0,a.Z)(i,2),o=r[0],u=r[1];return(0,s.useEffect)((function(){n&&t&&u(n.find((function(e){return e.id===+t})))}),[t,n]),(0,l.jsx)(l.Fragment,{children:o.description&&(0,l.jsx)("span",{className:c.description,children:o.description})})}function u(e){var t=e.directory,n=e.users,c=e.complaintDetailItem,u=e.machines,d=e.setComplaintsPage,h=e.complaintsPage,m=e.setUpdateList,p=e.updateList,_=(0,s.useState)({}),f=(0,a.Z)(_,2),x=f[0],j=f[1],v=(0,s.useState)(0),b=(0,a.Z)(v,2),g=b[0],y=b[1],S=(0,s.useState)(""),C=(0,a.Z)(S,2),D=C[0],Z=C[1],T=(0,s.useState)(""),k=(0,a.Z)(T,2),N=k[0],O=k[1],w=(0,s.useState)(0),P=(0,a.Z)(w,2),E=P[0],M=P[1],F=(0,s.useState)(0),I=(0,a.Z)(F,2),L=I[0],G=I[1],X=(0,s.useState)(0),R=(0,a.Z)(X,2),U=R[0],J=R[1],V=(0,s.useState)(""),Y=(0,a.Z)(V,2),A=Y[0],K=Y[1],B=(0,s.useState)(0),H=(0,a.Z)(B,2),q=H[0],z=H[1],W=(0,s.useState)(0),Q=(0,a.Z)(W,2),$=Q[0],ee=Q[1],te=(0,s.useState)(""),ne=(0,a.Z)(te,2),ie=ne[0],ae=ne[1],re=(0,s.useState)(0),se=(0,a.Z)(re,2),ce=se[0],le=se[1],oe=(0,s.useState)({}),ue=(0,a.Z)(oe,2),de=ue[0],he=ue[1],me=(0,s.useState)(!1),pe=(0,a.Z)(me,2),_e=pe[0],fe=pe[1],xe=function(e){var t="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===t.length)return t.pop().split(";").shift()}("csrftoken");(0,s.useEffect)((function(){c.hasOwnProperty("id")&&j((0,i.Z)({},c))}),[c]),(0,s.useEffect)((function(){x.hasOwnProperty("id")&&(y(x.id),Z(x.date),O(x.description),M(x.downtime),G(x.duration),J(x.machine),K(x.recovery_date),z(x.recovery_method),ee(x.service_center),ae(x.spares),le(x.unit))}),[x]);return(0,l.jsxs)("div",{className:r.complaints_detail,children:["complaints_create"===h?(0,l.jsx)("h3",{children:"\u0414\u041e\u0411\u0410\u0412\u041b\u0415\u041d\u0418\u0415 \u041d\u041e\u0412\u041e\u0419 \u0420\u0415\u041a\u041b\u0410\u041c\u0410\u0426\u0418\u0418."}):null,(0,l.jsx)("button",{type:"button",className:r.close_button,title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:function(e){e.preventDefault(),d("complaints_list")},children:"X"}),(0,l.jsxs)("form",{autoComplete:"off",onSubmit:function(e){"complaints_detail"===h?function(e){e.preventDefault(),fe(!0),fetch("http://localhost:8000/api/complaints/".concat(g),{method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":xe},body:JSON.stringify({date:D,duration:L,description:N,spares:ie,recovery_date:A,downtime:E,unit:ce,recovery_method:q,machine:U,service_center:$}),credentials:"include"}).then((function(e){if(e.ok)return e.json();throw Error("".concat(e.status," ").concat(e.statusText))})).then((function(e){j(e),he({className:r.status_ok,statusText:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b"}),m("")})).catch((function(e){he({className:r.status_error,statusText:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b, \u043e\u0448\u0438\u0431\u043a\u0430 \n ".concat(e)}),console.log(e)})).finally((function(){fe(!1)}))}(e):"complaints_create"===h&&function(e){e.preventDefault(),fe(!0),fetch("http://localhost:8000/api/complaints/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":xe},body:JSON.stringify({date:D,duration:L,description:N,spares:ie,recovery_date:A,downtime:E,unit:ce,recovery_method:q,machine:U,service_center:$}),credentials:"include"}).then((function(e){if(e.ok)return e.json();throw Error("".concat(e.status," ").concat(e.statusText))})).then((function(e){j(e),he({className:r.status_ok,statusText:"\u0417\u0430\u043f\u0438\u0441\u044c \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430"}),m("")})).catch((function(e){he({className:r.status_error,statusText:"\u0417\u0430\u043f\u0438\u0441\u044c \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430, \u043e\u0448\u0438\u0431\u043a\u0430 \n ".concat(e)}),console.log(e)})).finally((function(){fe(!1)}))}(e)},children:[(0,l.jsxs)("label",{children:["\u0414\u0430\u0442\u0430 \u043e\u0442\u043a\u0430\u0437\u0430:",(0,l.jsx)("input",{type:"date",name:"date",id:"",value:D,onChange:function(e){return Z(e.target.value)}})]}),(0,l.jsxs)("label",{children:["\u041c\u0430\u0448\u0438\u043d\u0430:",(0,l.jsxs)("select",{value:U,onChange:function(e){return J(e.target.value)},name:"",id:"",children:[(0,l.jsx)("option",{value:0,disabled:!0,children:"== \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 =="}),u.map((function(e){return(0,l.jsxs)("option",{value:e.id,children:[e.machine_number," \xa0",t.find((function(t){return t.id===e.machine_model})).title]},e.id)}))]})]}),(0,l.jsxs)("label",{children:["\u0423\u0437\u0435\u043b \u043e\u0442\u043a\u0430\u0437\u0430:",(0,l.jsxs)("select",{value:ce,onChange:function(e){return le(e.target.value)},name:"",id:"",children:[(0,l.jsx)("option",{value:0,disabled:!0,children:"== \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 =="}),t.map((function(e){return"BRU"===e.name?(0,l.jsx)("option",{value:e.id,children:e.title},e.id):null}))]})]}),(0,l.jsx)(o,{dirID:ce,directory:t}),(0,l.jsxs)("label",{children:["\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435 \u043e\u0442\u043a\u0430\u0437\u0430:",(0,l.jsx)("input",{type:"text",name:"description",id:"",value:N,onChange:function(e){return O(e.target.value)}})]}),(0,l.jsxs)("label",{children:["\u0421\u043f\u043e\u0441\u043e\u0431 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f:",(0,l.jsxs)("select",{value:q,onChange:function(e){return z(e.target.value)},name:"",id:"",children:[(0,l.jsx)("option",{value:0,disabled:!0,children:"== \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 =="}),t.map((function(e){return"RMT"===e.name?(0,l.jsx)("option",{value:e.id,children:e.title},e.id):null}))]})]}),(0,l.jsx)(o,{dirID:q,directory:t}),(0,l.jsxs)("label",{children:["\u0418\u0441\u043f\u043e\u043b\u044c\u0437\u0443\u0435\u043c\u044b\u0435 \u0437\u0430\u043f\u0430\u0441\u043d\u044b\u0435 \u0447\u0430\u0441\u0442\u0438:",(0,l.jsx)("input",{type:"text",name:"spares",id:"",value:ie,onChange:function(e){return ae(e.target.value)}})]}),(0,l.jsxs)("label",{children:["\u0414\u0430\u0442\u0430 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f:",(0,l.jsx)("input",{type:"date",name:"recovery_date",id:"",value:A,onChange:function(e){return K(e.target.value)}})]}),(0,l.jsxs)("label",{children:["\u0412\u0440\u0435\u043c\u044f \u043f\u0440\u043e\u0441\u0442\u043e\u044f \u0442\u0435\u0445\u043d\u0438\u043a\u0438:",(0,l.jsx)("input",{type:"text",name:"duration",id:"",disabled:!0,value:(new Date(A).getTime()-new Date(D).getTime())/864e5||0,onChange:function(e){return G(e.target.value)}})]}),(0,l.jsxs)("label",{children:["\u041d\u0430\u0440\u0430\u0431\u043e\u0442\u043a\u0430, \u043c/\u0447\u0430\u0441:",(0,l.jsx)("input",{type:"text",name:"duration",id:"",value:L,onChange:function(e){return G(e.target.value)}})]}),(0,l.jsxs)("label",{children:["\u0421\u0435\u0440\u0432\u0438\u0441\u043d\u0430\u044f \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044f:",Object.entries(n).length>0?(0,l.jsxs)("select",{value:$,onChange:function(e){return ee(e.target.value)},name:"",id:"",children:[(0,l.jsx)("option",{value:0,disabled:!0,children:"== \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 =="}),n.map((function(e){return e.groups.includes(2)?(0,l.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name]},e.id):null}))]}):null]}),(0,l.jsxs)("div",{className:r.submit,children:["complaints_detail"===h?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{type:"submit",name:"submit",children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),(0,l.jsx)("button",{type:"button",name:"delete",onClick:function(e){return function(e,t){e.preventDefault(),window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0440\u0435\u043a\u043b\u0430\u043c\u0430\u0446\u0438\u044e ".concat(t.description,"?"))&&fetch("http://localhost:8000/api/complaints/".concat(t.id),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRFToken":xe},credentials:"include"}).then((function(e){if(e.ok)return e;throw Error("".concat(e.status," ").concat(e.statusText))})).then((function(e){d("complaints_list"),m(p+1)})).catch((function(e){he({className:r.status_error,statusText:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \n ".concat(e)}),console.log(e)}))}(e,x)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]}):null,"complaints_create"===h?(0,l.jsx)("button",{type:"submit",name:"submit",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}):null,_e?(0,l.jsx)("div",{className:r.status_ok,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):null,de?(0,l.jsx)("div",{className:de.className,children:de.statusText}):null]})]})]})}},88:function(e,t,n){n.d(t,{Z:function(){return u}});var i=n(683),a=n(885),r={to_detail:"TODetail_to_detail__ITrZM",close_button:"TODetail_close_button__hN-Fb",textarea:"TODetail_textarea__HrWNe",submit:"TODetail_submit__fliv+",status_ok:"TODetail_status_ok__APoba",status_error:"TODetail_status_error__oFOn2"},s=n(791),c={description:"DirDescription_description__u11VK"},l=n(184);function o(e){var t=e.dirID,n=e.directory,i=(0,s.useState)({}),r=(0,a.Z)(i,2),o=r[0],u=r[1];return(0,s.useEffect)((function(){n&&t&&u(n.find((function(e){return e.id===+t})))}),[t,n]),(0,l.jsx)(l.Fragment,{children:o.description&&(0,l.jsx)("span",{className:c.description,children:o.description})})}function u(e){var t=e.directory,n=e.users,c=e.toProp,u=e.machines,d=e.setToPage,h=e.toPage,m=e.setUpdateList,p=e.updateList,_=(0,s.useState)({}),f=(0,a.Z)(_,2),x=f[0],j=f[1],v=(0,s.useState)(),b=(0,a.Z)(v,2),g=b[0],y=b[1],S=(0,s.useState)(""),C=(0,a.Z)(S,2),D=C[0],Z=C[1],T=(0,s.useState)(0),k=(0,a.Z)(T,2),N=k[0],O=k[1],w=(0,s.useState)(""),P=(0,a.Z)(w,2),E=P[0],M=P[1],F=(0,s.useState)(""),I=(0,a.Z)(F,2),L=I[0],G=I[1],X=(0,s.useState)(),R=(0,a.Z)(X,2),U=R[0],J=R[1],V=(0,s.useState)(),Y=(0,a.Z)(V,2),A=Y[0],K=Y[1],B=(0,s.useState)(0),H=(0,a.Z)(B,2),q=H[0],z=H[1],W=(0,s.useState)({}),Q=(0,a.Z)(W,2),$=Q[0],ee=Q[1],te=(0,s.useState)(!1),ne=(0,a.Z)(te,2),ie=ne[0],ae=ne[1],re=function(e){var t="; ".concat(document.cookie).split("; ".concat(e,"="));if(2===t.length)return t.pop().split(";").shift()}("csrftoken");(0,s.useEffect)((function(){c.hasOwnProperty("id")&&j((0,i.Z)({},c))}),[c]),(0,s.useEffect)((function(){x.hasOwnProperty("id")&&(y(x.id),Z(x.date),O(x.duration),M(x.order),G(x.order_date),J(x.machine),K(x.service_type),z(x.service_center))}),[x]);return(0,l.jsxs)("div",{className:r.to_detail,children:["to_create"===h?(0,l.jsx)("h3",{children:"\u0414\u041e\u0411\u0410\u0412\u041b\u0415\u041d\u0418\u0415 \u041d\u041e\u0412\u041e\u0413\u041e \u0422\u041e."}):null,(0,l.jsx)("button",{type:"button",className:r.close_button,title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:function(e){e.preventDefault(),d("to_list")},children:"X"}),(0,l.jsxs)("form",{autoComplete:"off",onSubmit:function(e){"to_detail"===h?function(e){e.preventDefault(),ae(!0),fetch("http://localhost:8000/api/to/".concat(g),{method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":re},body:JSON.stringify({date:D,duration:N,order:E,order_date:L,service_type:A,service_center:q,machine:U}),credentials:"include"}).then((function(e){if(e.ok)return e.json();throw Error("".concat(e.status," ").concat(e.statusText))})).then((function(e){j(e),ee({className:r.status_ok,statusText:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b"}),m(p+1)})).catch((function(e){ee({className:r.status_error,statusText:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b, \u043e\u0448\u0438\u0431\u043a\u0430 \n ".concat(e)}),console.log(e)})).finally((function(){ae(!1)}))}(e):"to_create"===h&&function(e){e.preventDefault(),ae(!0),fetch("http://localhost:8000/api/to/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":re},body:JSON.stringify({date:D,duration:N,order:E,order_date:L,service_type:A,service_center:q,machine:U}),credentials:"include"}).then((function(e){if(e.ok)return e.json();throw Error("".concat(e.status," ").concat(e.statusText))})).then((function(e){j(e),ee({className:r.status_ok,statusText:"\u0417\u0430\u043f\u0438\u0441\u044c \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430"}),m(p+1)})).catch((function(e){ee({className:r.status_error,statusText:"\u0417\u0430\u043f\u0438\u0441\u044c \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430, \u043e\u0448\u0438\u0431\u043a\u0430 \n ".concat(e)}),console.log(e)})).finally((function(){ae(!1)}))}(e)},children:[(0,l.jsxs)("label",{children:["\u0414\u0430\u0442\u0430 \u0437\u0430\u043a\u0430\u0437-\u043d\u0430\u0440\u044f\u0434\u0430:",(0,l.jsx)("input",{type:"date",name:"order_date",id:"",value:L,onChange:function(e){return G(e.target.value)}})]}),(0,l.jsxs)("label",{children:["\u2116 \u0437\u0430\u043a\u0430\u0437-\u043d\u0430\u0440\u044f\u0434\u0430:",(0,l.jsx)("input",{type:"text",name:"order",id:"",value:E,onChange:function(e){return M(e.target.value)}})]}),(0,l.jsxs)("label",{children:["\u041c\u0430\u0448\u0438\u043d\u0430:",(0,l.jsxs)("select",{value:U,onChange:function(e){return J(e.target.value)},name:"",id:"",children:[(0,l.jsx)("option",{value:0,disabled:!0,children:"== \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 =="}),u.map((function(e){return(0,l.jsxs)("option",{value:e.id,children:[e.machine_number," \xa0",t.find((function(t){return t.id===e.machine_model})).title]},e.id)}))]})]}),(0,l.jsxs)("label",{children:["\u0412\u0438\u0434 \u0422\u041e:",(0,l.jsxs)("select",{value:A,onChange:function(e){return K(e.target.value)},name:"",id:"",children:[(0,l.jsx)("option",{value:0,disabled:!0,children:"== \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 =="}),t.map((function(e){return"STP"===e.name?(0,l.jsx)("option",{value:e.id,children:e.title},e.id):null}))]})]}),(0,l.jsx)(o,{dirID:A,directory:t}),(0,l.jsxs)("label",{children:["\u0414\u0430\u0442\u0430 \u043f\u0440\u043e\u0432\u0435\u0434\u0435\u043d\u0438\u044f \u0422\u041e:",(0,l.jsx)("input",{type:"date",name:"date",id:"",value:D,onChange:function(e){return Z(e.target.value)}})]}),(0,l.jsxs)("label",{children:["\u041d\u0430\u0440\u0430\u0431\u043e\u0442\u043a\u0430, \u043c/\u0447\u0430\u0441:",(0,l.jsx)("input",{type:"text",name:"duration",id:"",value:N,onChange:function(e){return O(e.target.value)}})]}),(0,l.jsxs)("label",{children:["\u0421\u0435\u0440\u0432\u0438\u0441\u043d\u0430\u044f \u043a\u043e\u043c\u043f\u0430\u043d\u0438\u044f:",Object.entries(n).length>0?(0,l.jsxs)("select",{value:q,onChange:function(e){return z(e.target.value)},name:"",id:"",children:[(0,l.jsx)("option",{value:0,disabled:!0,children:"== \u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430 =="}),n.map((function(e){return e.groups.includes(2)?(0,l.jsxs)("option",{value:e.id,children:[e.first_name," ",e.last_name]},e.id):null}))]}):null]}),(0,l.jsxs)("div",{className:r.submit,children:["to_detail"===h?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("button",{type:"submit",name:"submit",children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),(0,l.jsx)("button",{type:"button",name:"delete",onClick:function(e){return function(e,t){e.preventDefault(),window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0437\u0430\u043a\u0430\u0437-\u043d\u0430\u0440\u044f\u0434 ".concat(t.order,"?"))&&fetch("http://localhost:8000/api/to/".concat(t.id),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRFToken":re},credentials:"include"}).then((function(e){if(e.ok)return e;throw Error("".concat(e.status," ").concat(e.statusText))})).then((function(e){m(p+1),d("to_list")})).catch((function(e){ee({className:r.status_error,statusText:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \n ".concat(e)}),console.log(e)}))}(e,x)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]}):null,"to_create"===h?(0,l.jsx)("button",{type:"submit",name:"submit",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}):null,ie?(0,l.jsx)("div",{className:r.status_ok,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):null,$?(0,l.jsx)("div",{className:$.className,children:$.statusText}):null]})]})]})}},683:function(e,t,n){n.d(t,{Z:function(){return s}});var i=n(142);function a(e,t,n){return(t=(0,i.Z)(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}}}]);
//# sourceMappingURL=929.35b82dcb.chunk.js.map