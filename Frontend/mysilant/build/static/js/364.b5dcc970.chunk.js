"use strict";(self.webpackChunkmysilant=self.webpackChunkmysilant||[]).push([[364],{364:function(t,e,n){n.r(e),n.d(e,{default:function(){return d}});var r=n(885),i={directories:"Directories_directories__-aA1a",add_btn:"Directories_add_btn__kXOal"},s=n(791),a=n(683),c={dir_detail:"DirectoryDetail_dir_detail__eH0DZ",close_button:"DirectoryDetail_close_button__aUHv0",textarea:"DirectoryDetail_textarea__9pEFT",pass_change:"DirectoryDetail_pass_change__cyMdZ",submit:"DirectoryDetail_submit__l3sJR",status_ok:"DirectoryDetail_status_ok__HkS5i",status_error:"DirectoryDetail_status_error__H5eN+"},o=n(184);function l(t){var e=t.detailItem,n=t.dirPage,i=t.setDirPage,l=t.updateDir,u=t.setUpdateDir,d=t.dict,h=(0,s.useState)({}),f=(0,r.Z)(h,2),p=f[0],_=f[1],m=(0,s.useState)(),j=(0,r.Z)(m,2),x=j[0],b=j[1],y=(0,s.useState)(""),D=(0,r.Z)(y,2),g=D[0],v=D[1],O=(0,s.useState)(""),k=(0,r.Z)(O,2),T=k[0],S=k[1],N=(0,s.useState)(""),P=(0,r.Z)(N,2),w=P[0],C=P[1],Z=(0,s.useState)(!1),E=(0,r.Z)(Z,2),F=E[0],R=E[1],U=(0,s.useState)({}),X=(0,r.Z)(U,2),A=X[0],H=X[1],I=(0,s.useState)(!1),J=(0,r.Z)(I,2),M=J[0],L=J[1],B=function(t){var e="; ".concat(document.cookie).split("; ".concat(t,"="));if(2===e.length)return e.pop().split(";").shift()}("csrftoken");(0,s.useEffect)((function(){e.hasOwnProperty("id")&&_((0,a.Z)({},e))}),[e]),(0,s.useEffect)((function(){p.hasOwnProperty("name")&&(b(p.id),v(p.name_),S(p.title),C(p.description))}),[p]);var G=function(t){if(t.preventDefault(),R(!0),!g)return H({className:c.status_error,statusText:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"}),R(!1),null;var e={name:d[g],title:T,description:w};fetch("http://localhost:8000/api/directory/".concat(x),{method:"PUT",headers:{"Content-Type":"application/json","X-CSRFToken":B},body:JSON.stringify(e),credentials:"include"}).then((function(t){if(t.ok)return t.json();throw Error("".concat(t.status," ").concat(t.statusText))})).then((function(t){_(t),H({className:c.status_ok,statusText:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b"}),u(l+1)})).catch((function(t){H({className:c.status_error,statusText:"\u0414\u0430\u043d\u043d\u044b\u0435 \u043d\u0435 \u043e\u0431\u043d\u043e\u0432\u043b\u0435\u043d\u044b, \u043e\u0448\u0438\u0431\u043a\u0430 \n ".concat(t)}),console.log(t)})).finally((function(){R(!1)}))},q=function(t){if(t.preventDefault(),R(!0),!T)return H({className:c.status_error,statusText:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"}),R(!1),null;if(!g)return H({className:c.status_error,statusText:"\u0423\u043a\u0430\u0436\u0438\u0442\u0435 \u0441\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a"}),R(!1),null;var e={name:d[g],title:T,description:w};fetch("http://localhost:8000/api/directory/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":B},body:JSON.stringify(e),credentials:"include"}).then((function(t){if(t.ok)return t.json();throw Error("".concat(t.status," ").concat(t.statusText))})).then((function(t){_(t),H({className:c.status_ok,statusText:"\u0417\u0430\u043f\u0438\u0441\u044c \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430"}),u(l+1),L(!0)})).catch((function(t){H({className:c.status_error,statusText:"\u0417\u0430\u043f\u0438\u0441\u044c \u043d\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u0430, \u043e\u0448\u0438\u0431\u043a\u0430 \n ".concat(t)}),console.log(t)})).finally((function(){R(!1)}))};return(0,o.jsxs)("div",{className:c.dir_detail,children:["dir_create"===n?(0,o.jsx)("h3",{children:"\u0414\u041e\u0411\u0410\u0412\u041b\u0415\u041d\u0418\u0415 \u041d\u041e\u0412\u041e\u0413\u041e \u041d\u0410\u0418\u041c\u0415\u041d\u041e\u0412\u0410\u041d\u0418\u042f."}):null,(0,o.jsx)("button",{type:"button",className:c.close_button,title:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",onClick:function(t){t.preventDefault(),i("dir_list")},children:"X"}),(0,o.jsxs)("form",{className:c.dir_detail_form,autoComplete:"off",onSubmit:function(t){"dir_detail"===n?G(t):"dir_create"===n&&q(t)},children:[(0,o.jsxs)("label",{children:["\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a:",(0,o.jsxs)("select",{value:g||0,onChange:function(t){return v(t.target.value)},children:[(0,o.jsx)("option",{name:"none",disabled:!0,value:0,children:"===\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0438\u0437 \u0441\u043f\u0438\u0441\u043a\u0430==="}),Object.keys(d).map((function(t){return(0,o.jsx)("option",{value:t,children:t},d[t])}))]})]}),(0,o.jsxs)("label",{children:["\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435:",(0,o.jsx)("input",{type:"text",name:"title",value:T,onChange:function(t){return S(t.target.value)}})]}),(0,o.jsxs)("label",{children:["\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435:",(0,o.jsx)("input",{type:"text",name:"description",maxLength:256,value:w,onChange:function(t){return C(t.target.value)}})]}),(0,o.jsxs)("div",{className:c.submit,children:["dir_detail"===n?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{type:"submit",name:"submit",children:"\u0418\u0437\u043c\u0435\u043d\u0438\u0442\u044c"}),(0,o.jsx)("button",{type:"button",name:"delete",onClick:function(t){return function(t){t.preventDefault(),window.confirm("\u0412\u044b \u0443\u0432\u0435\u0440\u0435\u043d\u044b, \u0447\u0442\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u043e\u0431\u044a\u0435\u043a\u0442 ".concat(p.title,"?"))&&fetch("http://localhost:8000/api/directory/".concat(x),{method:"DELETE",headers:{"Content-Type":"application/json","X-CSRFToken":B},credentials:"include"}).then((function(t){if(t.ok)return i("dir_list"),u(l+1),t;throw Error("".concat(t.status," ").concat(t.statusText))})).catch((function(t){H({className:c.status_error,statusText:"\u041f\u0440\u043e\u0438\u0437\u043e\u0448\u043b\u0430 \u043e\u0448\u0438\u0431\u043a\u0430 \n ".concat(t)}),console.log(t)}))}(t)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})]}):null,"dir_create"===n?(0,o.jsx)("button",{type:"submit",disabled:M,name:"submit",children:"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c"}):null,F?(0,o.jsx)("div",{className:c.status_ok,children:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430..."}):null,A?(0,o.jsx)("div",{className:A.className,children:A.statusText}):null]})]})]})}var u={"\u041c\u043e\u0434\u0435\u043b\u044c \u0442\u0435\u0445\u043d\u0438\u043a\u0438":"MOD","\u041c\u043e\u0434\u0435\u043b\u044c \u0434\u0432\u0438\u0433\u0430\u0442\u0435\u043b\u044f":"ENG","\u041c\u043e\u0434\u0435\u043b\u044c \u0442\u0440\u0430\u043d\u0441\u043c\u0438\u0441\u0441\u0438\u0438":"TRA","\u041c\u043e\u0434\u0435\u043b\u044c \u0432\u0435\u0434\u0443\u0449\u0435\u0433\u043e \u043c\u043e\u0441\u0442\u0430":"DAX","\u041c\u043e\u0434\u0435\u043b\u044c \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0435\u043c\u043e\u0433\u043e \u043c\u043e\u0441\u0442\u0430":"SAX","\u0412\u0438\u0434 \u0422\u041e":"STP","\u0423\u0437\u0435\u043b \u043e\u0442\u043a\u0430\u0437\u0430":"BRU","\u0421\u043f\u043e\u0441\u043e\u0431 \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f":"RMT"};function d(t){var e=t.directory,n=t.updateDir,a=t.setUpdateDir,c=(0,s.useState)("dir_list"),d=(0,r.Z)(c,2),h=d[0],f=d[1],p=(0,s.useState)({}),_=(0,r.Z)(p,2),m=_[0],j=_[1];return(0,o.jsxs)("div",{className:i.directories,children:["dir_create"===h?(0,o.jsx)(l,{detailItem:{name_:"",title:"",description:""},dirPage:h,setDirPage:f,updateDir:n,setUpdateDir:a,dict:u}):null,"dir_detail"===h?(0,o.jsx)(l,{detailItem:m,dirPage:h,setDirPage:f,updateDir:n,setUpdateDir:a,dict:u}):null,"dir_list"===h?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("button",{type:"button",className:i.add_btn,onClick:function(t){t.preventDefault(),f("dir_create")},children:"+ \u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"}),(0,o.jsxs)("table",{children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{children:"\u0421\u043f\u0440\u0430\u0432\u043e\u0447\u043d\u0438\u043a"}),(0,o.jsx)("th",{children:"\u041d\u0430\u0438\u043c\u0435\u043d\u043e\u0432\u0430\u043d\u0438\u0435"}),(0,o.jsx)("th",{children:"\u041e\u043f\u0438\u0441\u0430\u043d\u0438\u0435"})]})}),(0,o.jsx)("tbody",{children:0===e.length?(0,o.jsx)("tr",{children:(0,o.jsx)("td",{colSpan:4,className:i.error_message,children:"\u0417\u0430\u043f\u0438\u0441\u0438 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b"})}):Object.keys(u).map((function(t){return(0,o.jsx)(o.Fragment,{children:e.map((function(e){return e.name_===t?(0,o.jsxs)("tr",{onClick:function(t){return function(t,e){j(e),f("dir_detail")}(0,e)},children:[(0,o.jsx)("td",{children:e.name_}),(0,o.jsx)("td",{children:e.title}),(0,o.jsx)("td",{children:e.description})]},e.id):null}))})}))})]})]}):null]})}},683:function(t,e,n){n.d(e,{Z:function(){return a}});var r=n(142);function i(t,e,n){return(e=(0,r.Z)(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function a(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?s(Object(n),!0).forEach((function(e){i(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}}}]);
//# sourceMappingURL=364.b5dcc970.chunk.js.map